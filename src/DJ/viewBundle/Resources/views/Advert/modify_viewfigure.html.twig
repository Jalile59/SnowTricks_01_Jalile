{% extends "DJviewBundle::template.html.twig" %}




{% block content %}
    
    <!-- Portfolio Modals -->
    
<!-- Page Content -->
    <div class="container" style="margin-top: 200px;">

        <div class="row">

            <!-- Blog Post Content Column -->
            <div id="principale" class="col-lg-10 col-lg-offset-1">

                <!-- Blog Post -->

                <!-- Title -->
                <h1>{{figure.figureName}}</h1>

                <!-- Author -->
                <p class="lead">
                    by <a id="auteur" href="#">Auteur</a>
                </p>

                <!-- Date/Time -->
                <p><span class="glyphicon glyphicon-time"></span> {{figure.figureCreateDate|date('d-M-Y')}}</p>

                <hr>

                <!-- Preview Image -->
                <div id="imagePincipale" class="screen">
                    <div class="col-lg-1 col-lg-offset-10" >
                        
                       
                       
                    </div>
                    <div class="col-lg-1" >
                        <a href=""><img src="{{asset('public/img/supprimer.png')}}" alt=""></a>
                    </div>
                <img id="videos" class="img-responsive displayed" style="margin-left: auto; margin-right: auto;" src="{{asset('imagesacueill/')}}{{figure.pictureacceuil}}" alt="{{figure.figureName}}">
                </div>
                <div id="videoprincipale" onclick="tes(this)" >
                </div>
                <hr>
                <div class="row" >
                    {% for figure in figure.picture %}
                    <div class="col-md-2" style="margin-top: 5px" >
                        <div class="row" >
                            <div class="col-lg-3 col-lg-offset-2" >
                                <a href="#"><img src="{{asset('public/img/supprimer.png')}}" alt=""></a>
                            </div>
                            <div class="col-lg-3 col-lg-offset-1" >
                                <div id="fileuploader" class="{{ loop.index }}" idphoto="{{figure.id}}"> </div>
                            </div>                        
                        </div> 
                        <div>
                         <a href="#"id='image{{loop.index}}' ><img id="{{figure.id}}" class="img-responsive displayed img" style="margin-left: auto; margin-right: auto;" src="{{asset('images/')}}{{figure.pictureLink}}" alt="" onclick="tes(this)"></a>                        
                        </div>
                    </div>
                    {% endfor %}
                    {% for figure in figure.videofigure %}
                    <div id="videolive" class="col-md-2"style="margin-top: 5px">
                        <div class="row" >
                            <div class="col-lg-3 col-lg-offset-3" >
                                <a href="#"><img src="{{asset('public/img/bouton-modifier_318-77528.png')}}" alt=""></a>
                            </div>
                            <div class="col-lg-3" >
                                <a href="#"><img src="{{asset('public/img/supprimer.png')}}" alt=""></a>
                            </div>
                        </div>
                        <a id="video{{figure.id}}" class="video" href="#" >{{figure.videolink|raw}}</a>
                    </div>
                    {% endfor %}
                </div>
                <hr>
                
                <hr>

                <!-- Post Content -->
                <p class="lead">{{figure.figureDescription}}</p>

                <hr>
                
                <hr>
                <div class="row">
                    <div class="col-md-4">
                        <a> Auteur: Djal</a>
                    </div>
                    <div class="col-md-4">
                        <a> </a>
                    </div>
                    <div class="col-md-4">
                        <a> </a>
                    </div>

                
                </div>
                <hr>


            </div>
        </div>

            <!-- Blog Sidebar Widgets Column -->

        <!-- /.row -->


        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright </p>
                </div>
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->
<script src="{{asset('public/jsp/imageprincipale.js')}}"></script>

<script src="{{asset('public/jsp/jquery.uploadfile.min.js')}}"></script>
<script>
   
    elements = document.querySelectorAll("#fileuploader");


$(document).ready(function()
{       
   
    for (i=0; i<elements.length; i++){ 
        
     var id= elements[i].getAttribute('idphoto');
    $(elements[i]).uploadFile({
    
    
    url:"../test/"+id, // ma varible dans l'url vaut null.
    fileName:"myfile",
    dragDrop:false,
    showDone:false,
    showPreview:false,
    showFileSize:false,
    showFileCounter:false,
    allowedTypes: 'jpg,png' ,
    onSuccess:function(files,data,xhr,pd)
        {
            //files: list of files
            //data: response from server
            //xhr : jquer xhr object
            console.log(files);
            console.log(data);
           console.log('ici'+id);
           newsrc(data['image'],data['id']);
            
        }

    })
      }
      
      
        
});

    function newsrc(src,id){
        

        element = document.getElementById(id);
        url = '/SnowTricks_01/web/images/'+src
        element.setAttribute('src', url);
        sansup = element.getAttribute('src');
        console.log(id);
        console.log(url);
        console.log('Veridi apres modif = '+sansup);
        
    }
</script>

    
               

{% endblock %}
